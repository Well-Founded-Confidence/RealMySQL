[8.10 외래키](#810-외래키)
- [8.10.1 자식 테이블의 변경이 대기하는 경우](#8101-자식-테이블의-변경이-대기하는-경우)
- [8.10.2 부모 테이블의 변경 작업이 대기하는 경우](#8102-부모-테이블의-변경-작업이-대기하는-경우)

# 8.10 외래키
- 외래키 제약이 설정되면 자동으로 연관된 테이블의 칼럼에 인덱스가 생성된다.
- 외래키가 제거되지 않으면 자동으로 생성된 인덱스를 삭제할 수 없다.
- 특징
  - 테이블의 변경이 발생하는 경우에만 잠금 경합이 발생한다.
  - 외래키와 연관되지 않은 칼럼의 변경은 최대한 잠금 경합을 발생시키지 않는다.

## 8.10.1 자식 테이블의 변경이 대기하는 경우
- 자식 테이블의 외래키 칼럼의 변경은 부모 테이블의 확인이 필요하다.
- 부모 테이블의 해당 레코드가 쓰기 잠금이 걸려있으면 해제될때까지 기다린다.
- 자식 테이블의 외래키가 아닌 칼럼의 변경은 외래키로 인한 잠금 확장이 발생하지 않는다.

## 8.10.2 부모 테이블의 변경 작업이 대기하는 경우
- 자식 테이블의 레코드에 대한 쓰기 잠금이 해제될때까지 기다려야 한다.
- 자식 테이블이 생성될 때 정의된 외래키의 특성 (CASCADE)때문에 부모 레코드가 삭제되면 자식 레코드도 동시에 삭제된다.
