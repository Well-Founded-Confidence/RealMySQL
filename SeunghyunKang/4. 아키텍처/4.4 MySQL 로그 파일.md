# MySQL 로그 파일

## 4.4.1 에러 로그 파일

MySQL이 실행되는 도중에 발생하는 에러나 경고 메시지가 출력되는 로그 파일이다.

### 4.4.1.1 MySQL이 시작하는 과정과 관련된 정보성 및 에러 메세지

MySQL 서버가 비정상적인 종료가 됐다면 `mysqld: ready for connections` 메시지를 확인해야 한다.

만약, ignore된 경우엔 해당 파라미터가 MySQL에 적용되지 않았음을 뜻한다.

변수명을 인시갛지 못하거나 설정된 파라미터 값의 내용을 인식하지 못하는 경우, MySQL 서버가 에러 메시지를 출력하고 시작하지 못했다는 메시지를 보여줄 것이다.

### 4.4.1.6 MySQL의 종료 메시지

누군가가 MySQL 서버를 종료시켰다면 에러 로그 파일에서 `Received SHUTDOWN from user ...`이라는 메시지를 확인할 수 있을 것이다.

그렇지 않고 스택 트레이스와 같은 내용이 출력되는 경우엔 MySQL 서버가 세그먼테이션 폴트로 비정상적 종료된 것으로 판단할 수 있다.

## 4.4.2 제너럴 쿼리 로그 파일(General Log)

MySQL 서버에서 실행되는 쿼리로 어떤 것들이 있는지 전체 목록을 뽑아서 검토해 볼 때가 있는데, 이때는 **쿼리 로그를 활성화**해서 쿼리를 쿼리 로그 파일로 기록하게 하면 된다.

## 4.3.3 슬로우 쿼리 로그

서비스가 적용되기 전에 전체적으로 튜닝하는 경우, 서비스 운영 중에 MySQL 서버의 전체적 성능 저하를 검사하거나 정기적 점검을 위한 튜닝으로 나눌 수 있다.

슬로우 쿼리 로그 파일에는 `long_query_time` 시스템 변수에 설정한 시간 이상의 시간이 소요된 쿼리가 모두 기록된다.

MyISAM이나 MEMORY 스토리지 엔진에서는 테이블 단위 잠금을 사용하고 있어서 SELECT 쿼리라고 해도 Lock_time이 1초 이상 소요될 가능성이 있다.

하지만 레코드 잠금을 사용하는 InnoDB도 이런 경우가 발생할 수 있는데, 이는 MySQL 엔진 레벨에서 설정한 테이블 잠금 때문일 가능성이 높다.

그래서 InnoDB 테이블에만 접근하는 쿼리 문장의 슬로우 쿼리 로그에서는 Lock_time 값은 튜닝이나 쿼리 분석에 별로 도움이 되지 않는다.

> Percona Toolkit의 pt-query-digest 스크립트를 이용하면 빈도나 처리 성능별로 쿼리를 정렬할 수 있다.
