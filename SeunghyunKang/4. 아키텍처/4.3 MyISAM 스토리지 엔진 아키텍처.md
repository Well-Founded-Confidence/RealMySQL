# MyISAM 스토리지 엔진 아키텍처

## 4.3.1 키 캐시

> InnoDB의 버퍼풀과 비슷한 역할

인덱스만을 대상으로 작동, 인덱스 디스크 쓰기 작업에 대해서만 부분적 버퍼링 역할 수행

```
키 캐시 히트율 = 100 - (key_reads / key_read_requests * 100)
```

key_reads: 인덱스를 디스크에서 읽어 들인 횟수

key_read_requests: 키 캐시로부터 인덱스를 읽은 횟수 저장

## 4.3.2 운영체제의 캐시 및 버퍼

키 캐시를 이용해 디스크를 검색하지 않고도 충분히 빠르게 검색 가능

MyISAM은 디스크 IO를 해결해 줄 어떠한 캐시나 버퍼링 기능도 가지고 있지 않다.

따라서, 항상 OS의 읽기 또는 쓰기 작업으로 요청된다.

하지만, 대부분의 OS에는 디스크로부터 읽고 쓰는 파일에 대한 캐시나 버퍼링 메커니즘을 탑재하고 있기에 매번 디스크의 파일을 읽지는 않는다.

## 4.3.3 데이터 파일과 프라이머리 키(인덱스) 구조

InnoDB 스토리지 엔진을 사용하는 테이블은 프라이머리 키에 의해 클러스터링되어 저장되는 반면, MyISAM은 PK 클러스터링 없이 데이터 파일이 힙 공간처럼 활용된다.

즉, MyISAM 테이블에 레코드는 PK 값과 무관하게 INSERT 되는 순서대로 데이터 파일에 저장된다.

그리고 레코드는 모두 ROWID라는 물리적 주솟값을 가지고 PK와 Secondary Index는 모두 ROWID 값을 포인터로 가진다.
